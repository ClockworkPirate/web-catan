var rolls=[5,2,6,3,8,10,9,12,11,4,8,10,9,4,5,6,3,11],terrainTypes={doge:4,pepe:4,brick:3,forest:4,mountain:3,interesting:1},terrain=[];for(var typ in terrainTypes){var img=new Image;img.src="images/"+typ+".png";for(var i=0;i<terrainTypes[typ];i++)terrain.push(img)}terrain=shuffleArray(terrain);var catanBoard=function(t){for(var e=[],i=0,r=Math.floor(Math.random()*(rolls.length+1)),n=0;t>n;n++){for(var o=[],a=t-Math.abs(t/2-n)-(n>t/2?1:0),s=0;a>s;s++)o.push(i+s==r?-1:rolls.shift());e.push(o),i+=a}console.log(e)},SQRT_3=Math.sqrt(3),makeNiceContext=function(t){return t.x=0,t.y=0,t.move=function(t,e){return this.x=t,this.y=e,this.moveTo(t,e)},t.moveR=function(t,e){return this.x+=t,this.y+=e,this.moveTo(this.x,this.y)},t.lineR=function(t,e){return this.x+=t,this.y+=e,this.lineTo(this.x,this.y)},t.drawRegHex=function(t){this.moveR(0,-t),this.lineR(SQRT_3*t/2,t/2),this.lineR(0,t),this.lineR(SQRT_3*-t/2,t/2),this.lineR(SQRT_3*-t/2,-t/2),this.lineR(0,-t),this.lineR(SQRT_3*t/2,-t/2),this.moveR(0,t)},t.moveHexCenter=function(t,e,i){this.moveR(SQRT_3*t*(e-(i%2==0?0:.5)),1.5*t*i)},t.imageR=function(t,e,i,r,n){this.drawImage(t,this.x+e-r/2,this.y+i-n/2,r,n)},t.drawCatanBoard=function(t){this.moveHexCenter(t,2,-3);var e=[3,4,5,4,3],i=1;for(var r in e){this.moveHexCenter(t,i-e[r],1);for(var n=0;n<e[r];n++)this.drawRegHex(t),this.imageR(terrain.pop(),0,0,SQRT_3*t,2*t),this.moveHexCenter(t,1,0);2==r&&i--}this.stroke(),this.moveHexCenter(t,-2.5,-2)},t},main=function(){var t=makeNiceContext($("canvas#board")[0].getContext("2d")),e=80;t.move(400,400),t.drawCatanBoard(e)};$(window).load(main);